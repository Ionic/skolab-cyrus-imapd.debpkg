<!-- Creator     : groff version 1.21 -->
<!-- CreationDate: Tue Aug  4 16:42:35 2015 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SQUATTER</title>

</head>
<body>

<h1 align="center">SQUATTER</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#FILES">FILES</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">squatter
&minus; create SQUAT indexes for mailboxes</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>squatter</b>
[ <b>&minus;C</b> <i>config-file</i> ] [ <b>&minus;r</b> ] [
<b>&minus;s</b> ] [ <b>&minus;i</b> ] [ <b>&minus;a</b> ] [
<b>&minus;v</b> ] <i>mailbox</i>... <b><br>
squatter</b> [ <b>&minus;C</b> <i>config-file</i> ] [
<b>&minus;r</b> ] [ <b>&minus;s</b> ] [ <b>&minus;i</b> ] [
<b>&minus;a</b> ] [ <b>&minus;v</b> ] <b>-u</b>
<i>user</i>... <b><br>
squatter</b> [ <b>&minus;C</b> <i>config-file</i> ] [
<b>-v</b> ] [ <b>-s</b> ] [ <b>-d</b> ] [ <b>-n</b>
<i>channel</i> ] <b>-R <br>
squatter</b> [ <b>&minus;C</b> <i>config-file</i> ] [
<b>-v</b> ] [ <b>-s</b> ] <b>-f</b> <i>synclogfile</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i><b>Squatter</b></i>
creates a new text index for one or more IMAP mailboxes. The
index is a unified index of all of the header and body text
of each message in a given mailbox. This index is used to
significantly reduce IMAP SEARCH times on a mailbox.</p>

<p style="margin-left:11%; margin-top: 1em">The name
<b>squatter</b> is a historical relic from the days when the
only indexing engine supported by Cyrus was SQUAT. Today the
<i>search_engine</i> setting in <i>imapd.conf</i> determines
which search engine is used.</p>

<p style="margin-left:11%; margin-top: 1em">In the first
synposis <b>squatter</b> creates an index of ALL messages in
the mailbox, not just those since the last time that it was
run. The <b>-i</b> option is used to select incremental
updates. Any messages appended to the mailbox after
<b>squatter</b> is run, will NOT be included in the index.
To include new messages in the index, <b>squatter</b> must
be run again.</p>

<p style="margin-left:11%; margin-top: 1em">In the second
synopsis, <b>squatter</b> runs in rolling mode. In this mode
<b>squatter</b> backgrounds itself and runs as a daemon,
listening to a sync log channel (chosen using <b>-n</b>
option, and set up using the <i>sync_log_channels</i>
setting in <i>imapd.conf</i>). Very soon after messages are
delivered or uploaded to mailboxes <b>squatter</b> will
incrementally index the affected mailbox.</p>

<p style="margin-left:11%; margin-top: 1em">Note that
incremental updates are very inefficient with the SQUAT
search engine. If using SQUAT for large and active
mailboxes, you should run <b>squatter</b> periodically as an
EVENT in <i>cyrus.conf</i>(5). Incremental updates are much
more efficient with Sphinx, so if using Sphinx you should
run <b>squatter -R</b> as a START in
<i>cyrus.conf</i>(5).</p>

<p style="margin-left:11%; margin-top: 1em">In the third
synopsis, <b>squatter</b> reads a single sync log file and
performs incremental indexing on the mailboxes listed
therein. This is sometimes useful for cleaning up after
problems with rolling mode.</p>

<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b>
Messages and mailboxes that have not been indexed can still
be SEARCHed, just not as quickly as those with an index.
Also, some advanced features of Sphinx like stemming will
not work unless messages have been indexed.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Squatter</b>
reads its configuration options out of the
<i>imapd.conf</i>(5) file unless specified otherwise by
<b>-C</b>.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;C</b>
<i>config-file</i></p>

<p style="margin-left:22%;">Read configuration options from
<i>config-file</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;R</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Run in rolling mode; <b>squatter</b> runs as a daemon
listening to a sync log channel and continuously
incrementally indexing mailboxes. See also <b>-d</b> and
<b>-n</b>.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;S</b>
<i>seconds</i></p>

<p style="margin-left:22%;">After processing each mailbox,
sleep for &quot;seconds&quot; before continuing. Can be used
to provide some load balancing. Accepts fractional
amounts.</p>

<p style="margin-left:11%;"><b>&minus;T</b>
<i>directory</i></p>

<p style="margin-left:22%;">When indexing, work on a
temporary copy of the search engine databases in
<i>directory</i>. That directory would typically be on some
very fast filesystem, like an SSD or tmpfs. This option may
not work with all search engines, but it&rsquo;s only effect
is to speed up initial indexing.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;u</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Extra options refer to usernames (e.g. foo@bar.com)
rather than mailbox names.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;d</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>In rolling mode, don&rsquo;t background and do emit log
messages on standard error. Useful for debugging.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;f</b>
<i>synclogfile</i></p>

<p style="margin-left:22%;">Read the <i>synclogfile</i> and
incrementally index all the mailboxes listed therein, then
exit.</p>

<p style="margin-left:11%;"><b>&minus;n</b>
<i>channel</i></p>

<p style="margin-left:22%;">In rolling mode, specify the
name of the sync log channel that <b>squatter</b> will
listen to. The default is &quot;squatter&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;o</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>In compact mode, if only one source database is
selected, just copy it to the destination rather than
compacting.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;F</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>In compact mode, filter the resulting database to only
include messages which are not expunged in mailboxes with
existing name/uidvalidity.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;A</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>In compact mode, audit the resulting database to ensure
that every non-expunged message in all the user&rsquo;s
mailboxes which is specified by cyrus.indexed.db is present
in the xapian database.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Recursively create indexes for all sub-mailboxes of the
mailboxes or mailbox prefixes given as arguments.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;s</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Skip mailboxes whose index file is older than their
current squat file (within a small time delta).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;i</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Incremental updates where indexes already exist.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;a</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Only create indexes for mailboxes which have the shared
<i>/vendor/cmu/cyrus-imapd/squat</i> annotation set to
&quot;true&quot;.</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The value of
the <b>/vendor/cmu/cyrus-imapd/squat</b> annotation is
inherited by all children of the given mailbox, so an entire
mailbox tree can be indexed (or not indexed) by setting a
single annotation on the root of that tree with a value of
&quot;true&quot; (or &quot;false&quot;). If a mailbox does
not have a <b>/vendor/cmu/cyrus-imapd/squat</b> annotation
set on it (or does not inherit one), then the mailbox is not
indexed. In other words, the implicit value of
<b>/vendor/cmu/cyrus-imapd/squat</b> is
&quot;false&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>&minus;v</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Increase the verbosity of
progress/status messages.</p></td></tr>
</table>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>/etc/imapd.conf
/etc/cyrus.conf</b></p>
<hr>
</body>
</html>
