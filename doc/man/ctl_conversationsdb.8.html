<!-- Creator     : groff version 1.21 -->
<!-- CreationDate: Tue Aug  4 16:42:33 2015 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>CTL_CONVERSATIONSDB</title>

</head>
<body>

<h1 align="center">CTL_CONVERSATIONSDB</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">ctl_conversationsdb
&minus; perform operations on the conversations
databases</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ctl_conversationsdb</b>
[ <b>-C</b> <i>config-file</i> ] <b>-d</b> <i>userid</i>
&gt; <i>text</i> <b><br>
ctl_conversationsdb</b> [ <b>-C</b> <i>config-file</i> ]
<b>-u</b> <i>userid</i> &lt; <i>text</i> <b><br>
ctl_conversationsdb</b> [ <b>-C</b> <i>config-file</i> ] [
<b>-v</b> ] [ <b>-z</b> | <b>-b</b> | <b>-R</b> ]
<i>userid</i> <b><br>
ctl_conversationsdb</b> [ <b>-C</b> <i>config-file</i> ] [
<b>-v</b> ] [ <b>-z</b> | <b>-b</b> | <b>-R</b> ]
<b>-r</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>Ctl_conversationsdb</b>
is used to perform various administrative operations on a
conversations database and associated information in
<i>cyrus.index</i> files.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Ctl_conversationsdb</b>
reads its configuration options out of the
<i>imapd.conf</i>(5) file unless specified otherwise by
<b>-C</b>. The <i>configdirectory</i> option is used to
determine the default location of the conversations
database.</p>

<p style="margin-left:11%; margin-top: 1em">In the first
synopsis, the <b>-d</b> option dumps the contents of a
conversations database to standard output in an ASCII
format. In the second synopsis, the resulting <i>file</i> is
fed back in, using the <b>-u</b> option to
&quot;undump&quot; from standard input. This pair of
commands is useful for disaster recovery, or for changing
the backend used to store the conversations database.</p>

<p style="margin-left:11%; margin-top: 1em">The third
synopsis is used to reconstruct conversations information in
various ways for a specific user, and the fourth to
reconstruct conversations information for all users. See
<small>OPTIONS</small> below for details.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;C&nbsp;</b><i>config-file</i></p>

<p style="margin-left:22%;">Read configuration options from
<i>config-file</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;d</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Dump the conversations database which corresponds to the
user <i>userid</i> to standard output in an ASCII format.
The resulting file can be used to recreate a database using
the <b>-u</b> option.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;u</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>&quot;Undumps&quot; the conversations database
corresponding to the user <i>userid</i>, i.e. replaces all
the entries with data from ASCII records parsed from
standard input. The output from the <b>-d</b> option can be
used as input.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Be more verbose when running.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;r</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Be recursive; apply the main operation to every user.
Warning: do not combine with <b>-u</b>, it will not do what
you expect.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;z</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Remove all conversation information from the
conversations database for user <i>userid</i>, and from all
the user&rsquo;s mailboxes. The information can all be
recalculated (eventually) from message headers, using the
<b>-b</b> option.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;b</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Rebuild all conversation information in the
conversations database for user <i>userid</i>, and in all
the user&rsquo;s mailboxes, from the header information in
messages. Does not affect messages which already have
conversation information.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">This is a bulk
mode version of what happens to each message when it
arrives, and can be used to add missing conversation
information for past messages, e.g. after using <b>-z</b> or
after upgrading Cyrus from older versions. Note: this
operation uses information from <i>cyrus.cache</i> files so
it does not need to read every single message file.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>&minus;R</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Recalculate counts of messages
stored in existing conversations in the conversations
database for user <i>userid</i>. This is a limited subset of
<b>-b</b>; in particular it does not create conversations or
assign messages to conversations.</p></td></tr>
</table>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>/etc/imapd.conf</b></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>imapd.conf(5)</b>,
<b>master(8)</b></p>
<hr>
</body>
</html>
